# Accounts

This is a basic RESTful application developed using Python and Flask that allows the creation and listing of accounts.
The service interface is defined in OpenAPI 3.0 and can be found under spec/accounts.yml.

## Setting up your environment
These instructions assume that you are running MacOSX with a functioning python version 3.7.0, although they should be broadly applicable
to Unix and Linux variants. If you are running a Windows based operating system please follow the instructions
on the python website.

Here we are using [Homebrew](https://brew.sh/) as our package manager to install pyenv:

`brew install pyenv`

`pyenv install 3.7.0`

## Deployment Environment

### Development

To run the application execute the following in order

Checkout the source code:

`git clone https://github.com/eilidht/Accounts.git`

Configure environment:

`cd Accounts`

`pyenv local 3.7.0`

`export FLASK_APP=flaskr`

`export FLASK_ENV=development`

`mkdir logs`

install
`make install-dev`

install database
`make init_db`

run the app
`make run`

### Production
Use a production WSGI server such as nginx. See the flask docs for more info: 
http://flask.pocoo.org/docs/1.0/tutorial/deploy/

## Logging
The log files will be written to the logs folder. There is an access log which records calls to the service  and 
an accounts log which logs accounts created or fetched.

## Testing
We provide a number of tools to allow testing of the application

### Integration tests
These can be run by executing the following in the root directory:

`make test`

### Postman
We provide a [postman](https://www.getpostman.com/) collection (accounts.postman_collection.json) which can be
imported into your local instance of this tool and used to invoke the two endpoints defined in the OpenAPI 3.0
specification file (spec/accounts.yml) once the application is running.


### Coverage
Test coverage can be generated by executing:

`make coverage`

This generates an HTML report in the htmlcov directory allowing you to see which lines were covered in each file.
Open htmlcov/index.html in your browser to see the report.
